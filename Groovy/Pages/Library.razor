@page "/"
@using Core.Models;
@using Groovy.Components;
@using Groovy.Services.Helpers;
@inject AudioBuilder AudioBuilder;

@foreach (var audio in listaAudios)
{
    <TrackInfoComponent Track="@audio" />
}

@code {
    private List<Audio> listaAudios;

    protected override async Task OnInitializedAsync()
    {
        List<string> tracksToLoad = new List<String>
        {
            "track1.flac",
            "track3.m4a",
            "track4.flac",
            "track5.mp3",
        };
        listaAudios = new List<Audio>();

        foreach (var track in tracksToLoad)
        {
            var temp = await AudioBuilder.FromBundledToLocalAsync(track);
            listaAudios.Add(temp);

        }

    }

    public void Dispose()
    {
        listaAudios.Clear();
    }
}